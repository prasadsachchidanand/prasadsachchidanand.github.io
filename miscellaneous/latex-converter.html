<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LaTeX to JSON Converter</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/svg+xml" href="../../../assets/img/favicon.png" />
    
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState } = React;

        // Lucide icons as SVG components
        const Copy = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
        );

        const Download = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
        );

        const Upload = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="17 8 12 3 7 8"></polyline>
                <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
        );

        const LatexToJsonConverter = () => {
            // Load from localStorage or use empty strings
            const [latexInput, setLatexInput] = useState(() => localStorage.getItem('latexInput') || '');
            const [jsonOutput, setJsonOutput] = useState(() => localStorage.getItem('jsonOutput') || '');
            const [date, setDate] = useState(() => localStorage.getItem('date') || '');
            const [title, setTitle] = useState(() => localStorage.getItem('title') || '');
            const [tags, setTags] = useState(() => localStorage.getItem('tags') || '');

            // Save to localStorage whenever values change
            React.useEffect(() => {
                localStorage.setItem('latexInput', latexInput);
            }, [latexInput]);

            React.useEffect(() => {
                localStorage.setItem('jsonOutput', jsonOutput);
            }, [jsonOutput]);

            React.useEffect(() => {
                localStorage.setItem('date', date);
            }, [date]);

            React.useEffect(() => {
                localStorage.setItem('title', title);
            }, [title]);

            React.useEffect(() => {
                localStorage.setItem('tags', tags);
            }, [tags]);

            const resetForm = () => {
                setLatexInput('');
                setJsonOutput('');
                setDate('');
                setTitle('');
                setTags('');
            };

            const convertLatexToJson = () => {
                try {
                    // STEP 1: Protect inline math ($...$) from HTML processing
                    const mathPlaceholders = [];
                    let cleanedInput = latexInput.replace(/\$([^$]+)\$/g, (match, math) => {
                        const placeholder = `__MATH_${mathPlaceholders.length}__`;
                        mathPlaceholders.push(math);
                        return placeholder;
                    });

                    // Protect display math (\[...\])
                    const displayMathPlaceholders = [];
                    cleanedInput = cleanedInput.replace(/\\\[([^\]]+)\\\]/g, (match, math) => {
                        const placeholder = `__DISPLAYMATH_${displayMathPlaceholders.length}__`;
                        displayMathPlaceholders.push(math);
                        return placeholder;
                    });

                    // Protect equation, align, and other math environments
                    const envMathPlaceholders = [];
                    cleanedInput = cleanedInput.replace(/(\\begin\{(?:equation|align|align\*|gather|gather\*|multline|multline\*)\}.*?\\end\{(?:equation|align|align\*|gather|gather\*|multline|multline\*)\})/gs, (match) => {
                        const placeholder = `__ENVMATH_${envMathPlaceholders.length}__`;
                        envMathPlaceholders.push(match);
                        return placeholder;
                    });

                    cleanedInput = cleanedInput.replace(/\\label\{[^}]*\}/g, '');

                    const formatReplacements = [
                        // Bold family
                        { from: /\\textbf\{([^}]*)\}/g, to: '<strong>$1</strong>' },
                        { from: /\\bf\s*\{([^}]*)\}/g, to: '<strong>$1</strong>' }, // old style
                        { from: /\{\\bf\s*([^}]*)\}/g, to: '<strong>$1</strong>' },

                        // Italic family
                        { from: /\\textit\{([^}]*)\}/g, to: '<em>$1</em>' },
                        { from: /\\it\s*\{([^}]*)\}/g, to: '<em>$1</em>' },
                        { from: /\{\\it\s*([^}]*)\}/g, to: '<em>$1</em>' },
                        { from: /\\emph\{([^}]*)\}/g, to: '<em>$1</em>' },     // most common semantic choice

                        // Underline (less common but still appears)
                        { from: /\\underline\{([^}]*)\}/g, to: '<u>$1</u>' },

                        // Sans-serif (sometimes used for keywords)
                        { from: /\\textsf\{([^}]*)\}/g, to: '<span class="font-sans">$1</span>' },

                        // Typewriter / code style
                        { from: /\\texttt\{([^}]*)\}/g, to: '<code class="font-mono bg-gray-100 px-1 rounded">$1</code>' },
                    ];

                    // Apply all formatting replacements
                    for (const { from, to } of formatReplacements) {
                        cleanedInput = cleanedInput.replace(from, to);
                    }

                    const hyperlinkReplacements = [
                        // Most common: \href{url}{text}
                        {
                            regex: /\\href\{([^}]+)\}\{([^}]*)\}/g,
                            replace: (match, url, text) => {
                                const cleanUrl = url.trim();
                                const cleanText = text.trim();
                                // Basic safety: only allow http/https urls
                                if (!cleanUrl.match(/^https?:\/\//i)) {
                                    return cleanText; // just show text if unsafe protocol
                                }
                                return `<a href="${cleanUrl}" class="text-blue-500 hover:text-blue-800" target="_blank" rel="noopener noreferrer">${cleanText}</a>`;
                            }
                        },

                        // Optional: \url{http://example.com} â†’ plain link
                        {
                            regex: /\\url\{([^}]+)\}/g,
                            replace: (match, url) => {
                                const cleanUrl = url.trim();
                                if (!cleanUrl.match(/^https?:\/\//i)) {
                                    return cleanUrl;
                                }
                                return `<a href="${cleanUrl}" class="text-blue-500 hover:text-blue-800" target="_blank" rel="noopener noreferrer">${cleanUrl}</a>`;
                            }
                        },
                    ];

                    // Apply hyperlink replacements
                    for (const { regex, replace } of hyperlinkReplacements) {
                        cleanedInput = cleanedInput.replace(regex, replace);
                    }

                    // Extract and process problem
                    const problemMatch = cleanedInput.match(/\\begin\{problem\}(.*?)\\end\{problem\}/s);
                    let problem = '';

                    if (problemMatch) {
                        let problemContent = problemMatch[1].trim();

                        // Process enumerate with alphabetic (lowercase) - most common
                        problemContent = problemContent.replace(/\\begin\{enumerate\}\[label\s*=\s*\(\\alph\*\)\](.*?)\\end\{enumerate\}/gs, (match, content) => {
                            const items = content.match(/\\item\s+(.*?)(?=\\item|$)/gs);
                            if (items) {
                                const listItems = items.map((item) => {
                                    const cleanItem = item.replace(/\\item\s+/, '').trim();
                                    return `                  <li class="my-4">\n                    ${cleanItem}\n                  </li>`;
                                }).join('\n');
                                return `<ol class="math-list-alpha">\n${listItems}\n                </ol>`;
                            }
                            return match;
                        });

                        // Process enumerate with alphabetic (uppercase)
                        problemContent = problemContent.replace(/\\begin\{enumerate\}\[label\s*=\s*\(\\Alph\*\)\](.*?)\\end\{enumerate\}/gs, (match, content) => {
                            const items = content.match(/\\item\s+(.*?)(?=\\item|$)/gs);
                            if (items) {
                                const listItems = items.map((item) => {
                                    const cleanItem = item.replace(/\\item\s+/, '').trim();
                                    return `                  <li class="my-4">\n                    ${cleanItem}\n                  </li>`;
                                }).join('\n');
                                return `<ol class="math-list-Alpha">\n${listItems}\n                </ol>`;
                            }
                            return match;
                        });

                        // Process enumerate with roman numerals (lowercase)
                        problemContent = problemContent.replace(/\\begin\{enumerate\}\[label\s*=\s*\(\\roman\*\)\](.*?)\\end\{enumerate\}/gs, (match, content) => {
                            const items = content.match(/\\item\s+(.*?)(?=\\item|$)/gs);
                            if (items) {
                                const listItems = items.map((item) => {
                                    const cleanItem = item.replace(/\\item\s+/, '').trim();
                                    return `                  <li class="my-4">\n                    ${cleanItem}\n                  </li>`;
                                }).join('\n');
                                return `<ol class="math-list-roman">\n${listItems}\n                </ol>`;
                            }
                            return match;
                        });

                        // Process enumerate with roman numerals (uppercase)
                        problemContent = problemContent.replace(/\\begin\{enumerate\}\[label\s*=\s*\(\\Roman\*\)\](.*?)\\end\{enumerate\}/gs, (match, content) => {
                            const items = content.match(/\\item\s+(.*?)(?=\\item|$)/gs);
                            if (items) {
                                const listItems = items.map((item) => {
                                    const cleanItem = item.replace(/\\item\s+/, '').trim();
                                    return `                  <li class="my-4">\n                    ${cleanItem}\n                  </li>`;
                                }).join('\n');
                                return `<ol class="math-list-Roman">\n${listItems}\n                </ol>`;
                            }
                            return match;
                        });

                        // Process plain enumerate (numeric - no label specified)
                        problemContent = problemContent.replace(/\\begin\{enumerate\}(.*?)\\end\{enumerate\}/gs, (match, content) => {
                            const items = content.match(/\\item\s+(.*?)(?=\\item|$)/gs);
                            if (items) {
                                const listItems = items.map((item) => {
                                    const cleanItem = item.replace(/\\item\s+/, '').trim();
                                    return `                  <li class="my-4">\n                    ${cleanItem}\n                  </li>`;
                                }).join('\n');
                                return `<ol class="math-list">\n${listItems}\n                </ol>`;
                            }
                            return match;
                        });

                        // Process itemize blocks (bullet points)
                        problemContent = problemContent.replace(/\\begin\{itemize\}(.*?)\\end\{itemize\}/gs, (match, content) => {
                            const items = content.match(/\\item\s+(.*?)(?=\\item|$)/gs);
                            if (items) {
                                const listItems = items.map((item) => {
                                    const cleanItem = item.replace(/\\item\s+/, '').trim();
                                    return `                  <li class="my-4">\n                    ${cleanItem}\n                  </li>`;
                                }).join('\n');
                                return `<ul class="math-list-disc">\n${listItems}\n                </ul>`;
                            }
                            return match;
                        });

                        problem = problemContent;
                        
                    } else {
                        problem = '';
                    }

                    // Extract hint(s)
                    const hintMatch = cleanedInput.match(/\\begin\{hint\}(.*?)\\end\{hint\}/s);
                    let hint = '';
                    if (hintMatch) {
                        const hintContent = hintMatch[1].trim();

                        // Check if hint contains itemize (bullets)
                        if (hintContent.includes('\\begin{itemize}')) {
                            const items = hintContent.match(/\\item\s+(.*?)(?=\\item|\\end\{itemize\})/gs);
                            if (items) {
                                const listItems = items.map((item) => {
                                    const cleanItem = item.replace(/\\item\s+/, '').trim();
                                    return `                    <li class="my-4">\n                      ${cleanItem}\n                    </li>`;
                                }).join('\n');

                                hint = `<ul class="math-list-disc">
${listItems}
                  </ul>`;
                            }
                        }
                        // Check if hint contains enumerate with roman numerals (lowercase)
                        else if (hintContent.includes('\\begin{enumerate}[label = (\\roman*)]')) {
                            const items = hintContent.match(/\\item\s+(.*?)(?=\\item|\\end\{enumerate\})/gs);
                            if (items) {
                                const listItems = items.map((item) => {
                                    const cleanItem = item.replace(/\\item\s+/, '').trim();
                                    return `                    <li class="my-4">\n                      ${cleanItem}\n                    </li>`;
                                }).join('\n');

                                hint = `<ol class="math-list-roman my-4">
${listItems}
                  </ol>`;
                            }
                        }
                        // Check if hint contains enumerate with roman numerals (uppercase)
                        else if (hintContent.includes('\\begin{enumerate}[label = (\\Roman*)]')) {
                            const items = hintContent.match(/\\item\s+(.*?)(?=\\item|\\end\{enumerate\})/gs);
                            if (items) {
                                const listItems = items.map((item) => {
                                    const cleanItem = item.replace(/\\item\s+/, '').trim();
                                    return `                    <li class="my-4">\n                      ${cleanItem}\n                    </li>`;
                                }).join('\n');

                                hint = `<ol class="math-list-Roman my-4">
${listItems}
                  </ol>`;
                            }
                        }
                        // Check if hint contains enumerate with alphabetic (lowercase)
                        else if (hintContent.includes('\\begin{enumerate}[label = (\\alph*)]')) {
                            const items = hintContent.match(/\\item\s+(.*?)(?=\\item|\\end\{enumerate\})/gs);
                            if (items) {
                                const listItems = items.map((item) => {
                                    const cleanItem = item.replace(/\\item\s+/, '').trim();
                                    return `                    <li class="my-4">\n                      ${cleanItem}\n                    </li>`;
                                }).join('\n');

                                hint = `<ol class="math-list-alpha my-4">
${listItems}
                  </ol>`;
                            }
                        }
                        // Check if hint contains enumerate with alphabetic (uppercase)
                        else if (hintContent.includes('\\begin{enumerate}[label = (\\Alph*)]')) {
                            const items = hintContent.match(/\\item\s+(.*?)(?=\\item|\\end\{enumerate\})/gs);
                            if (items) {
                                const listItems = items.map((item) => {
                                    const cleanItem = item.replace(/\\item\s+/, '').trim();
                                    return `                    <li class="my-4">\n                      ${cleanItem}\n                    </li>`;
                                }).join('\n');

                                hint = `<ol class="math-list-Alpha my-4">
${listItems}
                  </ol>`;
                            }
                        }
                        // Check if hint contains regular enumerate (numeric)
                        else if (hintContent.includes('\\begin{enumerate}')) {
                            const items = hintContent.match(/\\item\s+(.*?)(?=\\item|\\end\{enumerate\})/gs);
                            if (items) {
                                const listItems = items.map((item) => {
                                    const cleanItem = item.replace(/\\item\s+/, '').trim();
                                    return `                    <li class="my-4">\n                      ${cleanItem}\n                    </li>`;
                                }).join('\n');

                                hint = `<ol class="math-list my-4">
${listItems}
                  </ol>`;
                            }
                        } else {
                            hint = hintContent;
                        }
                    }

                    // Extract solution
                    const solutionMatch = cleanedInput.match(/\\begin\{solution\}(.*?)\\end\{solution\}/s);
                    let solution = '';
                    if (solutionMatch) {
                        let solutionContent = solutionMatch[1].trim();

                        // Process enumerate blocks in solution
                        solutionContent = solutionContent.replace(/\\begin\{enumerate\}\[label\s*=\s*\(\\roman\*\)\](.*?)\\end\{enumerate\}/gs, (match, content) => {
                            const items = content.match(/\\item\s+(.*?)(?=\\item|$)/gs);
                            if (items) {
                                const listItems = items.map((item) => {
                                    let cleanItem = item.replace(/\\item\s+/, '').trim();
                                    // Check if item contains %--- marker
                                    const hasHr = cleanItem.includes('%---') || cleanItem.includes('% ---');
                                    // Remove the marker from the content
                                    cleanItem = cleanItem.replace(/%\s*---\s*/g, '').trim();
                                    const hr = hasHr ? '\n                      <hr class="h-px my-4 bg-gray-300 border-0">' : '';
                                    return `                    <li class="my-4">\n                      ${cleanItem}${hr}\n                    </li>`;
                                }).join('\n');
                                return `<ol class="math-list-roman my-4">\n${listItems}\n                  </ol>`;
                            }
                            return match;
                        });

                        solutionContent = solutionContent.replace(/\\begin\{enumerate\}\[label\s*=\s*\(\\Roman\*\)\](.*?)\\end\{enumerate\}/gs, (match, content) => {
                            const items = content.match(/\\item\s+(.*?)(?=\\item|$)/gs);
                            if (items) {
                                const listItems = items.map((item) => {
                                    let cleanItem = item.replace(/\\item\s+/, '').trim();
                                    const hasHr = cleanItem.includes('%---') || cleanItem.includes('% ---');
                                    cleanItem = cleanItem.replace(/%\s*---\s*/g, '').trim();
                                    const hr = hasHr ? '\n                      <hr class="h-px my-4 bg-gray-300 border-0">' : '';
                                    return `                    <li class="my-4">\n                      ${cleanItem}${hr}\n                    </li>`;
                                }).join('\n');
                                return `<ol class="math-list-Roman my-4">\n${listItems}\n                  </ol>`;
                            }
                            return match;
                        });

                        solutionContent = solutionContent.replace(/\\begin\{enumerate\}\[label\s*=\s*\(\\alph\*\)\](.*?)\\end\{enumerate\}/gs, (match, content) => {
                            const items = content.match(/\\item\s+(.*?)(?=\\item|$)/gs);
                            if (items) {
                                const listItems = items.map((item) => {
                                    let cleanItem = item.replace(/\\item\s+/, '').trim();
                                    const hasHr = cleanItem.includes('%---') || cleanItem.includes('% ---');
                                    cleanItem = cleanItem.replace(/%\s*---\s*/g, '').trim();
                                    const hr = hasHr ? '\n                      <hr class="h-px my-4 bg-gray-300 border-0">' : '';
                                    return `                    <li class="my-4">\n                      ${cleanItem}${hr}\n                    </li>`;
                                }).join('\n');
                                return `<ol class="math-list-alpha my-4">\n${listItems}\n                  </ol>`;
                            }
                            return match;
                        });

                        solutionContent = solutionContent.replace(/\\begin\{enumerate\}\[label\s*=\s*\(\\Alph\*\)\](.*?)\\end\{enumerate\}/gs, (match, content) => {
                            const items = content.match(/\\item\s+(.*?)(?=\\item|$)/gs);
                            if (items) {
                                const listItems = items.map((item) => {
                                    let cleanItem = item.replace(/\\item\s+/, '').trim();
                                    const hasHr = cleanItem.includes('%---') || cleanItem.includes('% ---');
                                    cleanItem = cleanItem.replace(/%\s*---\s*/g, '').trim();
                                    const hr = hasHr ? '\n                      <hr class="h-px my-4 bg-gray-300 border-0">' : '';
                                    return `                    <li class="my-4">\n                      ${cleanItem}${hr}\n                    </li>`;
                                }).join('\n');
                                return `<ol class="math-list-Alpha my-4">\n${listItems}\n                  </ol>`;
                            }
                            return match;
                        });

                        solutionContent = solutionContent.replace(/\\begin\{enumerate\}(.*?)\\end\{enumerate\}/gs, (match, content) => {
                            const items = content.match(/\\item\s+(.*?)(?=\\item|$)/gs);
                            if (items) {
                                const listItems = items.map((item) => {
                                    let cleanItem = item.replace(/\\item\s+/, '').trim();
                                    const hasHr = cleanItem.includes('%---') || cleanItem.includes('% ---');
                                    cleanItem = cleanItem.replace(/%\s*---\s*/g, '').trim();
                                    const hr = hasHr ? '\n                      <hr class="h-px my-4 bg-gray-300 border-0">' : '';
                                    return `                    <li class="my-4">\n                      ${cleanItem}${hr}\n                    </li>`;
                                }).join('\n');
                                return `<ol class="math-list my-4">\n${listItems}\n                  </ol>`;
                            }
                            return match;
                        });

                        // Process itemize blocks in solution
                        solutionContent = solutionContent.replace(/\\begin\{itemize\}(.*?)\\end\{itemize\}/gs, (match, content) => {
                            const items = content.match(/\\item\s+(.*?)(?=\\item|$)/gs);
                            if (items) {
                                const listItems = items.map((item) => {
                                    let cleanItem = item.replace(/\\item\s+/, '').trim();
                                    const hasHr = cleanItem.includes('%---') || cleanItem.includes('% ---');
                                    cleanItem = cleanItem.replace(/%\s*---\s*/g, '').trim();
                                    const hr = hasHr ? '\n                      <hr class="h-px my-4 bg-gray-300 border-0">' : '';
                                    return `                    <li class="my-4">\n                      ${cleanItem}${hr}\n                    </li>`;
                                }).join('\n');
                                return `<ul class="math-list-disc">\n${listItems}\n                  </ul>`;
                            }
                            return match;
                        });

                        // Split by \vspace patterns (with or without \hspace following)
                        const paragraphs = solutionContent.split(/\\vspace\{[^}]+\}(?:\s*\\hspace\{[^}]+\})?/);

                        solution = paragraphs.map((para, idx) => {
                            const trimmed = para.trim();
                            if (!trimmed) return '';

                            const content = trimmed;
                            // Don't wrap in div if content already starts with a list
                            if (content.trim().startsWith('<ol') || content.trim().startsWith('<ul')) {
                                if (idx === paragraphs.length - 1) {
                                    return content;
                                } else {
                                    return content + '\n\n<hr class="h-px my-4 bg-gray-300 border-0">';
                                }
                            } else {
                                const divContent = `<div class="leading-relaxed lg:text-lg md:text-base text-justify">${content}</div>`;
                                if (idx === paragraphs.length - 1) {
                                    return divContent;
                                } else {
                                    return divContent + '\n\n<hr class="h-px my-4 bg-gray-300 border-0">';
                                }
                            }
                        }).filter(p => p).join('\n');
                    }

                    // STEP FINAL: Restore protected math expressions
                    problem = problem.replace(/__MATH_(\d+)__/g, (match, index) => {
                        return `$${mathPlaceholders[index]}$`;
                    });
                    problem = problem.replace(/__DISPLAYMATH_(\d+)__/g, (match, index) => {
                        return `\\[${displayMathPlaceholders[index]}\\]`;
                    });
                    problem = problem.replace(/__ENVMATH_(\d+)__/g, (match, index) => {
                        return envMathPlaceholders[index];
                    });

                    hint = hint.replace(/__MATH_(\d+)__/g, (match, index) => {
                        return `$${mathPlaceholders[index]}$`;
                    });
                    hint = hint.replace(/__DISPLAYMATH_(\d+)__/g, (match, index) => {
                        return `\\[${displayMathPlaceholders[index]}\\]`;
                    });
                    hint = hint.replace(/__ENVMATH_(\d+)__/g, (match, index) => {
                        return envMathPlaceholders[index];
                    });

                    solution = solution.replace(/__MATH_(\d+)__/g, (match, index) => {
                        return `$${mathPlaceholders[index]}$`;
                    });
                    solution = solution.replace(/__DISPLAYMATH_(\d+)__/g, (match, index) => {
                        return `\\[${displayMathPlaceholders[index]}\\]`;
                    });
                    solution = solution.replace(/__ENVMATH_(\d+)__/g, (match, index) => {
                        return envMathPlaceholders[index];
                    });

                    // Create JSON object
                    const jsonObj = {
                        date: date || new Date().toISOString().split('T')[0],
                        title: title || 'Problem of the Day',
                        problem: problem,
                        hint: hint,
                        solution: solution,
                        tags: tags ? tags.split(',').map(t => t.trim()) : []
                    };

                    setJsonOutput(JSON.stringify(jsonObj, null, 2));
                } catch (error) {
                    setJsonOutput(`Error: ${error.message}`);
                }
            };

            const copyToClipboard = () => {
                navigator.clipboard.writeText(jsonOutput);
            };

            const downloadJson = () => {
                const blob = new Blob([jsonOutput], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `problem-${date || 'export'}.json`;
                a.click();
                URL.revokeObjectURL(url);
            };

            const handleFileUpload = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        setLatexInput(event.target.result);
                    };
                    reader.readAsText(file);
                }
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-6">
                    <div className="max-w-7xl mx-auto">
                        <div className="text-center mb-8">
                            <h1 className="text-4xl font-bold text-slate-800 mb-2">
                                LaTeX to JSON Converter
                            </h1>
                            <p className="text-slate-600">
                                Convert problem, hint, and solution from LaTeX to JSON format
                            </p>
                        </div>

                        <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                            <div className="flex items-center justify-between mb-4">
                                <h2 className="text-xl font-semibold text-slate-800">Metadata</h2>
                                <button
                                    onClick={resetForm}
                                    className="px-3 py-1.5 bg-red-100 hover:bg-red-200 text-red-700 rounded-md text-sm transition-colors"
                                >
                                    Reset Form
                                </button>
                            </div>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label className="block text-sm font-medium text-slate-700 mb-2">
                                        Date
                                    </label>
                                    <input
                                        type="date"
                                        value={date}
                                        onChange={(e) => setDate(e.target.value)}
                                        className="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium text-slate-700 mb-2">
                                        Title
                                    </label>
                                    <input
                                        type="text"
                                        value={title}
                                        onChange={(e) => setTitle(e.target.value)}
                                        placeholder="Problem of the Day"
                                        className="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium text-slate-700 mb-2">
                                        Tags (comma-separated)
                                    </label>
                                    <input
                                        type="text"
                                        value={tags}
                                        onChange={(e) => setTags(e.target.value)}
                                        placeholder="algebra, group-theory"
                                        className="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    />
                                </div>
                            </div>
                        </div>

                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div className="bg-white rounded-lg shadow-lg p-6">
                                <div className="flex items-center justify-between mb-4">
                                    <h2 className="text-xl font-semibold text-slate-800">
                                        LaTeX Input
                                    </h2>
                                    <label className="cursor-pointer flex items-center gap-2 px-3 py-1.5 bg-slate-100 hover:bg-slate-200 rounded-md text-sm text-slate-700 transition-colors">
                                        <Upload />
                                        Upload .tex
                                        <input
                                            type="file"
                                            accept=".tex,.txt"
                                            onChange={handleFileUpload}
                                            className="hidden"
                                        />
                                    </label>
                                </div>
                                <textarea
                                    value={latexInput}
                                    onChange={(e) => setLatexInput(e.target.value)}
                                    placeholder="Paste your LaTeX code here..."
                                    className="w-full h-96 px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm"
                                />
                                <button
                                    onClick={convertLatexToJson}
                                    className="w-full mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors"
                                >
                                    Convert to JSON
                                </button>
                            </div>

                            <div className="bg-white rounded-lg shadow-lg p-6">
                                <div className="flex items-center justify-between mb-4">
                                    <h2 className="text-xl font-semibold text-slate-800">
                                        JSON Output
                                    </h2>
                                    <div className="flex gap-2">
                                        <button
                                            onClick={copyToClipboard}
                                            disabled={!jsonOutput}
                                            className="flex items-center gap-2 px-3 py-1.5 bg-slate-100 hover:bg-slate-200 disabled:bg-slate-50 disabled:text-slate-400 rounded-md text-sm text-slate-700 transition-colors"
                                        >
                                            <Copy />
                                            Copy
                                        </button>
                                        <button
                                            onClick={downloadJson}
                                            disabled={!jsonOutput}
                                            className="flex items-center gap-2 px-3 py-1.5 bg-slate-100 hover:bg-slate-200 disabled:bg-slate-50 disabled:text-slate-400 rounded-md text-sm text-slate-700 transition-colors"
                                        >
                                            <Download />
                                            Download
                                        </button>
                                    </div>
                                </div>
                                <textarea
                                    value={jsonOutput}
                                    readOnly
                                    placeholder="JSON output will appear here..."
                                    className="w-full h-96 px-3 py-2 border border-slate-300 rounded-md bg-slate-50 font-mono text-sm"
                                />
                            </div>
                        </div>

                        <div className="mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <h3 className="font-semibold text-blue-900 mb-2">Expected LaTeX Format:</h3>
                            <pre className="text-sm text-blue-800 overflow-x-auto">
                                {`\\begin{problem}
  Your problem text here with $math$ notation
\\end{problem}

\\begin{hint}
  Your hint (can use \\begin{enumerate}\\item...\\end{enumerate})
\\end{hint}

\\begin{solution}
  Solution paragraphs separated by
  \\vspace{0.3cm}
  \\hspace{0.3cm}
\\end{solution}`}
                            </pre>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<LatexToJsonConverter />);
    </script>
</body>
</html>